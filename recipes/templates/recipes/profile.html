{%load static%}
<!DOCTYPE html>
<html>
<head>
    <title>Profile - RecipEazy</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css">

    <link rel="stylesheet" href = "{%static 'css/profile.css'%}">
</head>
<body>
    <header id="header">
        <div class="container">
            <nav>
                <div class="logo">Recip<span>Eazy</span></div>
                <div class="nav-links">
                    <a href="{% url 'index' %}">Home</a>
                    <a href="{% url 'recipe_list' %}">Recipes</a>
                    <a href="{% url 'profile' %}" class="active">Profile</a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'recipe-create' %}">Make Recipe</a>
                    {% endif %}
                </div>
                <div class="search-bar">
                    <form action="{% url 'search-recipe' %}" method="get">
                        <input type="text" name="q" placeholder="Enter recipe name..." required>
                        <button type="submit"><i class="fas fa-search"></i></button>
                    </form>
                </div>
                <div class="nav-links">
                    {% if user.is_authenticated %}
                    <a href="{% url 'logout' %}">Logout</a>
                    {% endif %}
                    {% if not user.is_authenticated %}
                    <a href="{% url 'login' %}">Login</a>
                    <a href="{% url 'register' %}">Register</a>
                    {% endif %}
                </div>
            </nav>
        </div>
    </header>
    
    <div class="container h-100">
        <div class="profile-container">
            <div class="profile-header">
                <img src="{{ user.profile.profile_pic.url }}" alt="{{ user.username }}'s profile" class="profile-image">
                <div class="profile-info">
                    <h2>{{ user.username }}</h2>
                    <p><i class="fas fa-envelope"></i> {{ user.email }}</p>
                    <p><i class="fas fa-calendar-alt"></i> Member since {{ user.date_joined|date:"F j, Y" }}</p>
                </div>
            </div>

            <div class="profile-form">
                <h3>Update Profile Information</h3>
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="id_username">Username</label>
                                {{ u_form.username }}
                            </div>
                            <div class="form-group">
                                <label for="id_email">Email</label>
                                {{ u_form.email }}
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="id_profile_pic">Profile Picture</label>
                                {{ p_form.profile_pic }}
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="update-btn">Update Profile</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>